# EDI 834 Field Definitions
# Comprehensive field definitions for ISA/IEA segments with validation rules

segments:
  ISA:
    name: "Interchange Control Header"
    description: "Defines the start of an EDI interchange and contains sender and receiver IDs, date, time, and control number"
    purpose: "Leading segment that initiates the EDI transaction"
    required: true
    position: 1
    
  IEA:
    name: "Interchange Control Trailer"
    description: "Defines the end of an EDI interchange and contains functional group count and control number"
    purpose: "Closing segment that corresponds to the ISA header"
    required: true
    position: last

isa_fields:
  ISA01:
    name: "Authorization Information Qualifier"
    purpose: "Identifies the type of authorization information"
    format_type: "numeric"
    format_length: 2
    valid_values: ["00", "01", "02"]
    # 00=no authorization, 01=password, 02=shared secret
    required: true
    position: 1
    default: "00"
    
  ISA02:
    name: "Authorization Information"
    purpose: "Authorization information though left blank in modern usage"
    format_type: "alphanumeric"
    format_length: 10
    valid_values: ["          ", "AUTH123456", "PASSWORD90"]
    # 10 spaces when ISA01 is 00
    required: true
    position: 2
    default: "          "
    
  ISA03:
    name: "Security Information Qualifier"
    purpose: "Identifies the type of security information"
    format_type: "numeric"
    format_length: 2
    valid_values: ["00", "01", "02"]
    # 00=no security, 01=password, 02=shared secret
    required: true
    position: 3
    default: "00"
    
  ISA04:
    name: "Security Information"
    purpose: "Security information though left blank in modern usage"
    format_type: "alphanumeric"
    format_length: 10
    valid_values: ["          ", "SECURE1234", "SECRET7890"]
    # 10 spaces when ISA03 is 00
    required: true
    position: 4
    default: "          "
    
  ISA05:
    name: "Interchange ID Qualifier (Sender)"
    purpose: "Identifies the type of sender ID"
    format_type: "alphanumeric"
    format_length: 2
    valid_values: ["ZZ", "01", "02", "03"]
    # ZZ=mutually defined, 01=DUNS, 02=SCAC, 03=Federal Tax ID
    required: true
    position: 5
    default: "ZZ"
    
  ISA06:
    name: "Interchange Sender ID"
    purpose: "Unique identifier for the sending organization"
    format_type: "alphanumeric"
    format_length: 15
    valid_values: ["SENDER_ID      ", "COMPANY        ", "HR_SYS_ABC     "]
    required: true
    position: 6
    default: "SENDER_ID     "
    
  ISA07:
    name: "Interchange ID Qualifier (Receiver)"
    purpose: "Identifies the type of receiver ID"
    format_type: "alphanumeric"
    format_length: 2
    valid_values: ["ZZ", "01", "02", "03"]
    # ZZ=mutually defined, 01=DUNS, 02=SCAC, 03=Federal Tax ID
    required: true
    position: 7
    default: "ZZ"
    
  ISA08:
    name: "Interchange Receiver ID"
    purpose: "Unique identifier for the receiving organization"
    format_type: "alphanumeric"
    format_length: 15
    valid_values: ["RECEIVER_ID    ", "CARRIER_ID     ", "BCBS_123       "]
    required: true
    position: 8
    default: "RECEIVER_ID    "
    
  ISA09:
    name: "Interchange Date"
    purpose: "Date the interchange was created"
    format_type: "numeric"
    format_length: 6
    valid_values: ["250917", "251201", "260101"]
    # Format: YYMMDD (2-digit year, 2-digit month, 2-digit day)
    required: true
    position: 9
    default: "250101"
    
  ISA10:
    name: "Interchange Time"
    purpose: "Time the interchange was created"
    format_type: "numeric"
    format_length: 4
    valid_values: ["1430", "0900", "2359"]
    # Format: HHMM (24-hour format)
    required: true
    position: 10
    default: "1010"
    
  ISA11:
    name: "Interchange Control Standards Identifier"
    purpose: "Identifies the EDI standard being used"
    format_type: "special"
    format_length: 1
    valid_values: ["^", "U", "T"]
    # ^=5010 standard, U=UCS, T=TDCC
    required: true
    position: 11
    default: "^"
    
  ISA12:
    name: "Interchange Control Version Number"
    purpose: "Version of the EDI standard"
    format_type: "alphanumeric"
    format_length: 5
    valid_values: ["00501", "00401", "00301"]
    # 00501=5010 version, 00401=4010 version, 00301=3010 version
    required: true
    position: 12
    default: "00501"
    
  ISA13:
    name: "Interchange Control Number"
    purpose: "Unique number for this interchange"
    format_type: "numeric"
    format_length: 9
    valid_values: ["000000001", "000000123", "123456789"]
    required: true
    position: 13
    default: "123456789"
    
  ISA14:
    name: "Acknowledgment Requested"
    purpose: "Whether acknowledgment is requested"
    format_type: "numeric"
    format_length: 1
    valid_values: ["0", "1"]
    # 0=no acknowledgment, 1=acknowledgment requested
    required: true
    position: 14
    default: "0"
    
  ISA15:
    name: "Usage Indicator"
    purpose: "Indicates if this is test or production data"
    format_type: "alpha"
    format_length: 1
    valid_values: ["P", "T"]
    # P=production, T=test
    required: true
    position: 15
    default: "T"
    
  ISA16:
    name: "Component Element Separator"
    purpose: "Separator for component elements within data elements"
    format_type: "special"
    format_length: 1
    valid_values: [":", ">", "+"]
    # Use colon (:) for 5010 standard
    required: true
    position: 16
    default: ":"

iea_fields:
  IEA01:
    name: "Number of Functional Groups"
    purpose: "Count of functional groups in this interchange"
    format_type: "numeric"
    format_length: >=5
    valid_values: ["1", "2", "10", "100"]
    required: true
    position: 1
    default: "1"
    
  IEA02:
    name: "Interchange Control Number"
    purpose: "Check versus ISA13 control number to ensure match"
    format_type: "numeric"
    format_length: 9
    valid_values: ["000000001", "000000123", "123456789"]
    required: true
    position: 2
    default: "123456789"

# Error types and their prevalence for realistic error generation
error_types:
  missing:
    description: "Required field is empty or missing"
    prevalence: 40
    # Most common error type
    
  wrong_length:
    description: "Field has incorrect number of characters"
    prevalence: 30
    # Common for date/time fields
    
  wrong_format:
    description: "Field contains invalid characters or is in the wrong format"
    prevalence: 20
    # Common for ID fields with special characters
    
  invalid_value:
    description: "Field contains valid format but wrong value"
    prevalence: 10
    # Least common, usually business logic errors

# Field validation rules
validation_rules:
  control_number_matching:
    description: "ISA13 and IEA02 must match"
    fields: ["ISA13", "IEA02"]
    rule: "exact_match"
    
  date_format:
    description: "ISA09 must be YYMMDD format"
    fields: ["ISA09"]
    rule: "date_format_YYMMDD"
    
  time_format:
    description: "ISA10 must be HHMM format"
    fields: ["ISA10"]
    rule: "time_format_HHMM"
    
  id_length:
    description: "ISA06 and ISA08 requires 15 characters no more no less"
    fields: ["ISA06", "ISA08"]
    rule: "exact_length_15"
